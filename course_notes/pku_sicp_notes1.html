<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/tango.css">
    <link rel="shortcut icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>北京大学 -- 程序设计技术和方法 notes(1) - Yilin's Wiki</title>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          <!--$表示行内元素，$$表示块状元素 -->
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
        },
        "HTML-CSS": { availableFonts: ["TeX"] }
      });
    </script>
    <script type="text/javascript" async
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>

    <!--Mermaid流程图-->
    <script src="https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/wiki/">Home</a>&nbsp;&#187;&nbsp;<a href="/wiki/#course_notes">course_notes</a>&nbsp;&#187;&nbsp;北京大学 -- 程序设计技术和方法 notes(1)
    <span class="updated">Page Updated&nbsp;
      2019-10-09 23:34
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">北京大学 -- 程序设计技术和方法 notes(1)</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">序</a><ul>
<li><a href="#_2">命令式和函数式计算</a></li>
<li><a href="#lisp">Lisp 是函数式语言之祖</a></li>
</ul>
</li>
<li><a href="#1">构造过程抽象 (1)</a><ul>
<li><a href="#scheme">Scheme 语言介绍</a></li>
<li><a href="#scheme_1">scheme 中的表达式</a></li>
<li><a href="#scheme_2">scheme 中命名和环境</a></li>
<li><a href="#scheme_3">scheme 中的过程定义</a></li>
<li><a href="#_3">过程应用的代换模型（简化模型）</a></li>
<li><a href="#_4">应用序和正则序求值</a></li>
<li><a href="#_5">条件表达式和谓词</a></li>
<li><a href="#_6">过程必须是有效的计算</a></li>
<li><a href="#scheme-c">Scheme 过程构造同 C 语言的对比</a></li>
</ul>
</li>
</ul>
</div>
<p>北京大学 裘宗燕 老师的课程</p>
<p>http://www.math.pku.edu.cn/teachers/qiuzy/progtech/</p>
<hr />
<h1 id="_1">序</h1>
<h2 id="_2">命令式和函数式计算</h2>
<p>程序设计的主流是命令式 (imperative) 程序设计，计算基于一组基本操 作，在一个环境里进行。操作效果是改变环境的状态，体现在所创建和 修改的状态中:</p>
<div class="hlcode"><pre><span class="err">初始状态</span> <span class="o">-&gt;</span> <span class="p">...</span> <span class="o">-&gt;</span> <span class="err">中间状态</span> <span class="o">-&gt;</span> <span class="p">...</span> <span class="o">-&gt;</span> <span class="err">结束状态</span>
</pre></div>


<p>函数式 (functional) 程序设计中计算过程被看成是数据的变换，程序的 行为就是对数据的一系列变换:</p>
<div class="hlcode"><pre><span class="err">数据</span> <span class="o">-&gt;</span> <span class="p">...</span> <span class="o">-&gt;</span> <span class="err">数据</span> <span class="o">-&gt;</span> <span class="p">...</span> <span class="o">-&gt;</span> <span class="err">数据</span>
</pre></div>


<p>(常规)程序以命令方式描述计算：</p>
<ul>
<li>层次较低，接近(容易有效利用)实际硬件(计算机)，可能高效</li>
<li>编程时需要关注更多细节，复杂，很容易出错</li>
</ul>
<p>函数式程序设计层次较高：</p>
<ul>
<li>更抽象，屏蔽计算的更多实现细节，程序可能更清晰</li>
<li>与实际硬件距离较远，需要复杂的运行时支持，可能效率较低</li>
</ul>
<p>在编程中命令式思维和函数式思维都有价值：</p>
<ul>
<li>在不同抽象层次，需灵活使用对程序的命令式思维和函数式思维</li>
</ul>
<p>程序的工作常可分解为一些阶段：</p>
<ul>
<li>每个阶段是对整体数据空间的某种变换(函数式的)</li>
<li>而每个变换又是通过复杂的状态操作实现(命令式的)</li>
</ul>
<h2 id="lisp">Lisp 是函数式语言之祖</h2>
<blockquote>
<p>LISP语言(LISP，List Processing的缩写)是一种早期开发的、具有重大意义的表处理语言。它适用于符号处理、自动推理、硬件描述和超大规模集成电路设计等。特点是，使用表结构来表达非数值计算问题，实现技术简单。LISP语言已成为最有影响，使用十分广泛的人工智能语言。</p>
</blockquote>
<p>关于 Scheme</p>
<ul>
<li>Scheme 是一种 Lisp 方言</li>
<li>Scheme 不是纯函数式语言，为了效率和对计算的控制，提供了命令式 特征(状态操作)。学习它有助于理解另一种编程思维，及在两种思维 和编程方式间权衡和转换</li>
</ul>
<p>学习函数式程序设计(包括 Lisp 类语言程序设计)，有助于掌握如何在较高抽象层次上思考计算问题和程序问题</p>
<hr />
<h1 id="1">构造过程抽象 (1)</h1>
<h2 id="scheme">Scheme 语言介绍</h2>
<p>Scheme 是交互式语言，其解释器运行时反复执行一个“读入-求值-打印 循环”(Read-Evaluate-Print Loop，REPL)。每次循环:</p>
<ul>
<li>读入一个完整的输入表达式(即，“一个程序”)</li>
<li>对表达式求值(计算)，得到一个值(还可能有其他效果)</li>
<li>输出求得的值(也是一个表达式)</li>
</ul>
<p>Scheme 编程就是<strong>构造各种表达式</strong>(是一种“表达式语言”)</p>
<p>Scheme 语言由三类(三个层次的)编程机制组成:</p>
<ul>
<li>基本表达式形式，是构造各种程序的基础</li>
<li>组合机制，用于从较简单的表达式构造更复杂的表达式</li>
<li>抽象机制，为复杂的结构命名，使人可以通过简单方式使用</li>
</ul>
<p>区分“<strong>过程</strong>”(操作)和“<strong>数据</strong>”，本章主要研究<strong>过程的构造</strong>。</p>
<p>和 C 语言的对比：</p>
<ul>
<li>C 语言是编译型语言<ul>
<li>程序有完整的结构，表达式/语句不是程序，不能运行</li>
<li>编制好的程序需要经过编译(加工)后才能投入运行</li>
</ul>
</li>
<li>从语言的结构看，C 语言有<ul>
<li>描述基本计算的表达式</li>
<li>描述基本动作的语句</li>
<li>语句之上的各种组合机制(描述控制流)</li>
<li>函数是语言里的抽象机制，用于把一段可能很复杂的计算抽象为一个简单形式的命令</li>
</ul>
</li>
<li>C 语言严格地区分了“数据”和操作数据的“过程”(代码)<ul>
<li>在 Scheme 里，数据和过程(代码)可以自然地相互转化: 数据可作为 <strong>被执行的代码</strong> ，代码可作为 <strong>被处理的数据</strong></li>
</ul>
</li>
</ul>
<h2 id="scheme_1">scheme 中的表达式</h2>
<p>一些简单的 Scheme 表达式举例</p>
<p>数字是基本表达式：</p>
<div class="hlcode"><pre><span class="o">&gt;</span> <span class="mi">235</span>
<span class="mi">235</span>
</pre></div>


<p>简单的算术表达式：</p>
<div class="hlcode"><pre><span class="o">&gt;</span> <span class="p">(</span><span class="o">+</span> <span class="mi">123</span> <span class="mi">456</span><span class="p">)</span>
<span class="mi">579</span>
<span class="o">&gt;</span> <span class="p">(</span><span class="o">+</span> <span class="mf">1.2</span> <span class="mi">3</span><span class="p">)</span>
<span class="mf">4.2</span>
</pre></div>


<p>表达式的形式：<strong>带括号的前缀形式</strong>。</p>
<p>有些运算符允许多个参数，如连加：</p>
<div class="hlcode"><pre><span class="o">&gt;</span> <span class="p">(</span><span class="o">+</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>
<span class="mi">10</span>
</pre></div>


<p>表达式可以任意嵌套：</p>
<div class="hlcode"><pre><span class="o">&gt;</span> <span class="p">(</span><span class="o">+</span> <span class="mi">1</span> <span class="p">(</span><span class="o">*</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="mi">7</span>
</pre></div>


<p>可以写任意复杂的表达式(组合式)，如：</p>
<div class="hlcode"><pre><span class="o">&gt;</span> <span class="p">(</span><span class="o">+</span> <span class="p">(</span><span class="o">*</span> <span class="mi">3</span> <span class="p">(</span><span class="o">+</span> <span class="p">(</span><span class="o">*</span> <span class="mi">2</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="o">+</span> <span class="mi">3</span> <span class="mi">5</span><span class="p">)))</span> <span class="p">(</span><span class="o">+</span> <span class="p">(</span><span class="o">-</span> <span class="mi">10</span> <span class="mi">7</span><span class="p">)</span> <span class="mi">6</span><span class="p">))</span>
</pre></div>


<p>复杂表达式难写难读。采用适当格式有利于正确书写和阅读:</p>
<div class="hlcode"><pre><span class="p">(</span><span class="o">+</span>
  <span class="p">(</span><span class="o">*</span> <span class="mi">3</span>
     <span class="p">(</span><span class="o">+</span> <span class="p">(</span><span class="o">*</span> <span class="mi">2</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="o">+</span> <span class="mi">3</span> <span class="mi">5</span><span class="p">)))</span>
  <span class="p">(</span><span class="o">+</span> <span class="p">(</span><span class="o">-</span> <span class="mi">10</span> <span class="mi">7</span><span class="p">)</span>
     <span class="mi">6</span><span class="p">))</span>
</pre></div>


<h2 id="scheme_2">scheme 中命名和环境</h2>
<p>编程语言必须提供为对象<strong>命名</strong>的机制，这是<strong>最基本的抽象机制</strong>。</p>
<p>用 define 为对象值命名(给名字关联一个值)：</p>
<div class="hlcode"><pre><span class="o">&gt;</span> <span class="p">(</span><span class="n">define</span> <span class="n">size</span> <span class="mi">10</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">size</span>
<span class="mi">10</span>
<span class="o">&gt;</span> <span class="p">(</span><span class="o">*</span> <span class="n">size</span> <span class="mi">3</span><span class="p">)</span>
<span class="mi">30</span>
</pre></div>


<p>可以用任意复杂的表达式描述要求关联于变量的值：</p>
<div class="hlcode"><pre><span class="o">&gt;</span> <span class="p">(</span><span class="n">define</span> <span class="n">num</span> <span class="p">(</span><span class="o">*</span> <span class="n">size</span> <span class="mi">30</span><span class="p">))</span>
<span class="o">&gt;</span> <span class="n">num</span>
<span class="mi">300</span>
</pre></div>


<p>计算对象的结构可能很复杂，需要通过复杂费时的计算才能得到，<strong>给计算得到的结果命名，可以很方便地多次使用</strong>。</p>
<p>复杂程序通常就是为了计算(构造)出很不容易得到的对象：</p>
<ul>
<li>通过多步构造和命名，分解构造过程，使之比较容易进行</li>
<li>建立名字-对象关联是其中最重要的抽象手段</li>
</ul>
<p>构造的值可以存入变量供以后使用，说明 Scheme 解释器有存储能力。 这种存储称为“<strong>环境</strong>”：</p>
<ul>
<li>define 建立或修改环境中的名字-值关联</li>
<li>表达式在当前环境求值，变量(名)的值由环境获得</li>
<li>Scheme 全局环境预先定义了一批 名字--对象 关联</li>
</ul>
<p>组合表达式求值：</p>
<ul>
<li>组合式求值要求<strong>先求值子表达式</strong>。 因此<strong>求值过程是递归的</strong>；</li>
<li>求值过程可以用<strong>树</strong>表示，先取得终端(叶)结点的值后向上累积；</li>
<li>最终在树根得到整个表达式的值；</li>
<li>树具有<strong>递归</strong>结构，递归处理很自然；</li>
</ul>
<p>求值规则有例外。如 (define x 1) 里的 x 不应该求值，是要求为名字 x 关联一个新值。说明 define 有特殊求值规则：</p>
<ul>
<li>有特殊求值规则的名字称为特殊形式(special form)。每个特殊形式有自己的求值规则。Scheme 有一组特殊形式，如 define</li>
</ul>
<h2 id="scheme_3">scheme 中的过程定义</h2>
<p>表达式可能变得很长，编程中经常出现重复或类似的表达式：</p>
<ul>
<li>为控制程序复杂性，必须有抽象机制，Scheme 用“过程定义”</li>
</ul>
<p>求平方过程的定义:</p>
<div class="hlcode"><pre><span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">square</span> <span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span> <span class="n">x</span> <span class="n">x</span><span class="p">))</span>
</pre></div>


<p>包括：过程名，形式参数，做什么(如何求值) 求值这种定义表达式，将相应计算过程关联于名字(这里的square)</p>
<p>定义好的过程就像基本操作，可以通过名字使用：</p>
<div class="hlcode"><pre><span class="o">&gt;</span> <span class="p">(</span><span class="n">square</span> <span class="mi">2</span><span class="p">)</span>
<span class="mi">4</span>
<span class="o">&gt;</span> <span class="p">(</span><span class="n">square</span> <span class="p">(</span><span class="o">*</span> <span class="p">(</span><span class="o">+</span> <span class="mi">1</span> <span class="mi">1</span><span class="p">)</span> <span class="mi">4</span><span class="p">))</span>
<span class="mi">64</span>
</pre></div>


<p>可以用过程名来定义新的过程（复合过程）：</p>
<div class="hlcode"><pre><span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">sum_of_squares</span> <span class="n">x</span> <span class="n">y</span><span class="p">)</span>
    <span class="p">(</span><span class="o">+</span> <span class="p">(</span><span class="n">square</span> <span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="n">square</span> <span class="n">y</span><span class="p">)))</span>
<span class="o">&gt;</span> <span class="p">(</span><span class="n">sum_of_squares</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>
<span class="mi">25</span>
</pre></div>


<p>预定义基本过程(操作)和特殊形式是构造程序的基本构件：</p>
<ul>
<li>从使用上完全看不出 square 是基本操作还是用户定义过程</li>
<li>复合过程的使用方式和威力与基本操作一样，是很好的语言特征</li>
</ul>
<h2 id="_3">过程应用的代换模型（简化模型）</h2>
<p>组合式和复合过程确定的计算过程是(代换模型):</p>
<ol>
<li>求出各参数表达式(子表达式)的值</li>
<li>找到要调用的过程的定义(根据第一个子表达式的求值结果)</li>
<li>用求出的实际参数代换过程体里的形式参数</li>
<li>求值过程体</li>
</ol>
<p>代换模型给出了过程定义和过程应用的一种语义：</p>
<ul>
<li>很多 Scheme 过程的行为可以用这个模型描述</li>
<li>后面会看到，更复杂的过程需要用扩充的语义模型</li>
</ul>
<p>代换模型只是为了帮助直观理解过程应用的行为：</p>
<ul>
<li>它并没有反映解释器的实际工作过程</li>
<li>实际解释器的情况后面讨论，基于环境实现</li>
<li>代换模型最简单，容易理解，但不足以解释所有的实际程序</li>
<li>其局限性是<strong>不能解释带有可变数据的程序</strong></li>
</ul>
<h2 id="_4">应用序和正则序求值</h2>
<p>解释器先求值子表达式(运算符和各运算对象)，而后把得到的运算应 用于运算对象(实际参数)。这种“先求值参数后应用运算符”的顺序称为应用序：</p>
<ul>
<li>这一做法合理，但合理的做法不唯一</li>
</ul>
<p>另一方式是先不求值运算对象，推迟到需要时再求值。这种“完全展开之后归约”的顺序称为正则序。</p>
<p>scheme 使用应用序求值</p>
<h2 id="_5">条件表达式和谓词</h2>
<p>复杂计算的描述中总需要描述条件和选择。</p>
<p>求绝对值的过程：</p>
<div class="hlcode"><pre><span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">abs</span> <span class="n">x</span><span class="p">)</span>
    <span class="p">(</span><span class="n">cond</span> <span class="p">((</span><span class="o">&gt;</span> <span class="n">x</span> <span class="mi">0</span><span class="p">)</span> <span class="n">x</span><span class="p">)</span>
          <span class="p">((</span><span class="o">=</span> <span class="n">x</span> <span class="mi">0</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
          <span class="p">((</span><span class="o">&lt;</span> <span class="n">x</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="o">-</span> <span class="n">x</span><span class="p">))))</span>
</pre></div>


<p>scheme 中条件表达式的一般形式：</p>
<div class="hlcode"><pre><span class="p">(</span><span class="nx">cond</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">p1</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nx">e1</span><span class="o">&gt;</span><span class="p">)</span>
      <span class="p">(</span><span class="o">&lt;</span><span class="nx">p2</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nx">e2</span><span class="o">&gt;</span><span class="p">)</span>
      <span class="nx">......</span>
      <span class="p">(</span><span class="o">&lt;</span><span class="nx">pn</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nx">en</span><span class="o">&gt;</span><span class="p">))</span>
</pre></div>


<p>依次求值各个 p(条件)，遇到第一个非false的条件后求值对应的 e，以其值作为整个cond 表达式的值</p>
<p>简化上面的 abs 过程：</p>
<div class="hlcode"><pre><span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">abs</span> <span class="n">x</span><span class="p">)</span>
    <span class="p">(</span><span class="n">cond</span> <span class="p">((</span><span class="o">&lt;</span> <span class="n">x</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="o">-</span> <span class="n">x</span><span class="p">))</span>
          <span class="p">(</span><span class="k">else</span> <span class="n">x</span><span class="p">)))</span>
</pre></div>


<p>else 表示永远成立的条件，只应该放在最后。</p>
<p>使用 if 的条件表达式形式：</p>
<div class="hlcode"><pre><span class="p">(</span><span class="k">if</span> <span class="o">&lt;</span><span class="nx">predicate</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nx">consequent</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nx">alternative</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>


<p>cond 和 if 都是特殊形式，有特殊的求值规则</p>
<p>逻辑组合运算符 and 和 or 也是特殊形式，采用特殊求值方式：</p>
<div class="hlcode"><pre><span class="p">(</span><span class="ow">and</span> <span class="o">&lt;</span><span class="nx">e1</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nx">e2</span><span class="o">&gt;</span> <span class="nx">...</span> <span class="o">&lt;</span><span class="nx">en</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>


<p>and求值规则：逐个求值 e，直到某个 e 求出假，或最后一个 e 求值完成。以最后求值的那个子表达式的值作为值。</p>
<div class="hlcode"><pre><span class="p">(</span><span class="ow">or</span> <span class="o">&lt;</span><span class="nx">e1</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nx">e2</span><span class="o">&gt;</span> <span class="nx">...</span> <span class="o">&lt;</span><span class="nx">en</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>


<p>or： 逐个求值 e，直到某个 e 求出真，或最后一个 e 求值完成。以最后求值的那个子表达式的值作为值</p>
<div class="hlcode"><pre><span class="p">(</span><span class="ow">not</span> <span class="o">&lt;</span><span class="nx">e</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>


<p>not：如果 e 的值不是真，就得真，否则得假。</p>
<p>求出真假值的过程称为谓词。各种关系运算符是基本谓词，可以用 and、or、not 组合出各种复杂逻辑条件，可以用过程定义谓词。</p>
<h2 id="_6">过程必须是有效的计算</h2>
<p>过程很像数学函数，但它<strong>必须要描述一种有效的计算方法</strong>。</p>
<p>什么是有效的计算？</p>
<p>看一个例子：</p>
<p>如果按照平方根的数学定义</p>
<div class="hlcode"><pre><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">is</span> <span class="n">the</span> <span class="n">y</span> <span class="n">that</span> <span class="n">y</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="n">and</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span> <span class="o">=</span> <span class="n">x</span>
</pre></div>


<div class="hlcode"><pre><span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">sqrt</span> <span class="n">x</span><span class="p">)</span>
    <span class="p">(</span><span class="n">the</span> <span class="n">y</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="o">&gt;=</span> <span class="n">y</span> <span class="mi">0</span><span class="p">)</span>
                <span class="p">(</span><span class="o">=</span> <span class="n">x</span> <span class="p">(</span><span class="o">*</span> <span class="n">y</span> <span class="n">y</span><span class="p">)))))</span>
</pre></div>


<p>这个过程定义是没有意义的。</p>
<p>我们可以用牛顿法来求平方根：</p>
<ul>
<li>从要求开平方的数和初始猜测值（这里设为1）开始</li>
<li>如果猜测值足够好就结束</li>
<li>否则就改进猜测值并重复这一过程</li>
</ul>
<div class="hlcode"><pre><span class="p">;</span> <span class="err">注意括号不能乱加，比如下面返回</span> <span class="n">guess</span> <span class="err">不能写成</span> <span class="p">(</span><span class="n">guess</span><span class="p">)</span><span class="err">，加括号的要是</span> <span class="n">applicable</span> <span class="err">的才行</span>
<span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">sqrt_iter</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span>
    <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="n">good_enough</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span>
        <span class="n">guess</span>
        <span class="p">(</span><span class="n">sqrt_iter</span> <span class="p">(</span><span class="n">improve</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span> <span class="n">x</span><span class="p">)))</span>

<span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">good_enough</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span>
    <span class="p">(</span><span class="o">&lt;</span> <span class="p">(</span><span class="n">abs</span> <span class="p">(</span><span class="o">-</span> <span class="p">(</span><span class="o">*</span> <span class="n">guess</span> <span class="n">guess</span><span class="p">)</span> <span class="n">x</span><span class="p">))</span> <span class="mf">0.001</span><span class="p">))</span>

<span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">improve</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span>
    <span class="p">(</span><span class="n">average</span> <span class="n">guess</span> <span class="p">(</span><span class="o">/</span> <span class="n">x</span> <span class="n">guess</span><span class="p">)))</span>

<span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">sqrt</span> <span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="n">sqrt_iter</span> <span class="mf">1.0</span> <span class="n">x</span><span class="p">))</span>
</pre></div>


<h2 id="scheme-c">Scheme 过程构造同 C 语言的对比</h2>
<ul>
<li>C 语言里计算过程的抽象机制是<strong>函数</strong>；</li>
<li>C 语言里函数需要描述<strong>类型</strong>（参数、返回值）；</li>
<li>C 语言的函数<strong>可以没有返回值</strong>；</li>
<li>C 语言中表达式是有关计算的描述，<strong>运行中每个表达式都算出一个值</strong>；</li>
<li>C 语言中语句是命令，要求做一个<strong>动作</strong>。动作没有“值”的概念；</li>
</ul>
<p>scheme 基于表达式，其中的每种结构都是<strong>表达式</strong>：</p>
<ul>
<li><strong>计算就是求值</strong>，计算一个表达式就要求求出它的值</li>
</ul>
<p>C 语言(和其他常规语言)的基本结构单元是 <strong>语句</strong> ，表达式只是语句的组成部分，不能独立存在</p>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Yilin Gui.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-11-13 00:07:12</p>
      </span>
    </div>

    
    
  </body>
</html>