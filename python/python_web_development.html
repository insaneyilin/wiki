<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/tango.css">
    <link rel="shortcut icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>Python Web 开发 - Yilin's Wiki</title>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          <!--$表示行内元素，$$表示块状元素 -->
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
        },
        "HTML-CSS": { availableFonts: ["TeX"] }
      });
    </script>
    <script type="text/javascript" async
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>

    <!--Mermaid流程图-->
    <script src="https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/wiki/">Home</a>&nbsp;&#187;&nbsp;<a href="/wiki/#python">python</a>&nbsp;&#187;&nbsp;Python Web 开发
    <span class="updated">Page Updated&nbsp;
      2019-11-20 23:01
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">Python Web 开发</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#http">HTTP协议简介</a><ul>
<li><a href="#http_1">HTTP请求流程</a></li>
<li><a href="#http_2">HTTP格式</a></li>
</ul>
</li>
<li><a href="#html-css-javascript">HTML CSS JavaScript 简介</a></li>
<li><a href="#wsgiweb-server-gateway-interface">WSGI：Web Server Gateway Interface</a></li>
<li><a href="#web">Web框架</a></li>
<li><a href="#_1">使用模板</a></li>
</ul>
</div>
<hr />
<h2 id="http">HTTP协议简介</h2>
<p>在Web应用中，服务器把网页传给浏览器，实际上就是把网页的HTML代码发送给浏览器，让浏览器显示出来。而浏览器和服务器之间的传输协议是HTTP，所以：</p>
<ul>
<li>HTML是一种用来定义网页的文本，会HTML，就可以编写网页；</li>
<li>HTTP是在网络上传输HTML的协议，用于浏览器和服务器的通信。</li>
</ul>
<h3 id="http_1">HTTP请求流程</h3>
<ul>
<li>步骤1：浏览器首先向服务器发送HTTP请求，请求包括：<ul>
<li>方法：GET还是POST，GET仅请求资源，POST会附带用户数据；</li>
<li>路径：/full/url/path；</li>
<li>域名：由Host头指定：Host: www.sina.com.cn</li>
<li>以及其他相关的Header；</li>
<li>如果是POST，那么请求还包括一个Body，包含用户数据。</li>
</ul>
</li>
<li>步骤2：服务器向浏览器返回HTTP响应，响应包括：<ul>
<li>响应代码：200表示成功，3xx表示重定向，4xx表示客户端发送的请求有错误，5xx表示服务器端处理时发生了错误；</li>
<li>响应类型：由 <code>Content-Type</code> 指定，例如：<code>Content-Type: text/html;charset=utf-8</code> 表示响应类型是HTML文本，并且编码是 <code>UTF-8</code> ， <code>Content-Type: image/jpeg</code> 表示响应类型是JPEG格式的图片；</li>
<li>以及其他相关的Header；</li>
<li>通常服务器的HTTP响应会携带内容，也就是有一个Body，包含响应的内容，网页的HTML源码就在Body中。</li>
</ul>
</li>
<li>步骤3：如果浏览器还需要继续向服务器请求其他资源，比如图片，就再次发出HTTP请求，重复步骤1、2。</li>
</ul>
<p>Web采用的HTTP协议采用了非常简单的请求-响应模式，从而大大简化了开发。当我们编写一个页面时，我们只需要在HTTP响应中把HTML发送出去，不需要考虑如何附带图片、视频等，浏览器如果需要请求图片和视频，它会发送另一个HTTP请求，因此， <strong>一个HTTP请求只处理一个资源</strong> 。</p>
<h3 id="http_2">HTTP格式</h3>
<p>每个HTTP请求和响应都遵循相同的格式，一个HTTP包含Header和Body两部分，其中Body是可选的。</p>
<p>HTTP协议是一种文本协议，所以，它的格式也非常简单。HTTP GET请求的格式：</p>
<div class="hlcode"><pre><span></span><span class="nf">GET</span> <span class="nn">/path</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Header1</span><span class="o">:</span> <span class="l">Value1</span>
<span class="na">Header2</span><span class="o">:</span> <span class="l">Value2</span>
<span class="na">Header3</span><span class="o">:</span> <span class="l">Value3</span>
</pre></div>


<p>每个Header一行一个，换行符是 <code>\r\n</code> 。</p>
<p>HTTP POST请求的格式：</p>
<div class="hlcode"><pre><span></span><span class="nf">POST</span> <span class="nn">/path</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Header1</span><span class="o">:</span> <span class="l">Value1</span>
<span class="na">Header2</span><span class="o">:</span> <span class="l">Value2</span>
<span class="na">Header3</span><span class="o">:</span> <span class="l">Value3</span>

body data goes here...
</pre></div>


<p>当遇到连续两个\r\n时，Header部分结束，后面的数据全部是Body。</p>
<p>HTTP响应的格式：</p>
<div class="hlcode"><pre><span></span><span class="mi">200</span> <span class="n">OK</span>
<span class="n">Header1</span><span class="p">:</span> <span class="n">Value1</span>
<span class="n">Header2</span><span class="p">:</span> <span class="n">Value2</span>
<span class="n">Header3</span><span class="p">:</span> <span class="n">Value3</span>

<span class="n">body</span> <span class="k">data</span> <span class="n">goes</span> <span class="n">here</span><span class="p">...</span>
</pre></div>


<p>HTTP响应如果包含body，也是通过\r\n\r\n来分隔的。请再次注意，Body的数据类型由Content-Type头来确定，如果是网页，Body就是文本，如果是图片，Body就是图片的二进制数据。</p>
<p>当存在Content-Encoding时，Body数据是被压缩的，最常见的压缩方式是gzip，所以，看到 <code>Content-Encoding: gzip</code> 时，需要将Body数据先解压缩，才能得到真正的数据。压缩的目的在于减少Body的大小，加快网络传输。</p>
<hr />
<h2 id="html-css-javascript">HTML CSS JavaScript 简介</h2>
<p>HTML 不是编程语言，是标记语言。</p>
<p>HTML定义了一套语法规则，来告诉浏览器如何把一个丰富多彩的页面显示出来。</p>
<p>CSS是Cascading Style Sheets（层叠样式表）的简称，CSS用来控制HTML里的所有元素如何展现。</p>
<p>JavaScript虽然名称有个Java，但它和Java真的一点关系没有。JavaScript是 <strong>为了让HTML具有交互性而作为脚本语言添加的</strong> ，JavaScript既可以内嵌到HTML中，也可以从外部链接到HTML中。</p>
<p>要学习Web开发，首先要对HTML、CSS和JavaScript作一定的了解。HTML定义了页面的内容，CSS来控制页面元素的样式，而JavaScript负责页面的交互逻辑。</p>
<hr />
<h2 id="wsgiweb-server-gateway-interface">WSGI：Web Server Gateway Interface</h2>
<p>一个Web应用的工作流程：</p>
<ul>
<li>浏览器发送一个HTTP请求；</li>
<li>服务器收到请求，生成一个HTML文档；</li>
<li>服务器把HTML文档作为HTTP响应的Body发送给浏览器；</li>
<li>浏览器收到HTTP响应，从HTTP Body取出HTML文档并显示。</li>
</ul>
<p>最简单的Web应用就是先把HTML用文件保存好，用一个现成的HTTP服务器软件，接收用户请求，从文件中读取HTML，返回。Apache、Nginx、Lighttpd等这些常见的静态服务器就是干这件事情的。</p>
<p>如果要动态生成HTML，就需要把上述步骤自己来实现。不过，接受HTTP请求、解析HTTP请求、发送HTTP响应都是苦力活，如果我们自己来写这些底层代码，还没开始写动态HTML呢，就得花个把月去读HTTP规范。</p>
<p>正确的做法是 <strong>底层代码由专门的服务器软件实现</strong> ，我们用Python专注于生成HTML文档。因为我们不希望接触到TCP连接、HTTP原始请求和响应格式，所以，需要一个统一的接口，让我们专心用Python编写Web业务。</p>
<p>这个接口就是WSGI：Web Server Gateway Interface。</p>
<p>WSGI接口定义非常简单，它只要求Web开发者实现一个函数，就可以响应HTTP请求。我们来看一个最简单的Web版本的“Hello, web!”：</p>
<div class="hlcode"><pre><span></span><span class="k">def</span> <span class="nf">application</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">):</span>
    <span class="n">start_response</span><span class="p">(</span><span class="s1">&#39;200 OK&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/html&#39;</span><span class="p">)])</span>
    <span class="k">return</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;&lt;h1&gt;Hello, web!&lt;/h1&gt;&#39;</span><span class="p">]</span>
</pre></div>


<ul>
<li><code>environ</code>：一个包含所有HTTP请求信息的dict对象；</li>
<li><code>start_response</code>：一个发送HTTP响应的函数。</li>
</ul>
<p>Python内置了一个WSGI服务器，这个模块叫wsgiref，它是用纯Python编写的WSGI服务器的参考实现。所谓“参考实现”是指该实现完全符合WSGI标准，但是不考虑任何运行效率，仅供开发和测试使用。</p>
<p>无论多么复杂的Web应用程序，入口都是一个WSGI处理函数。HTTP请求的所有输入信息都可以通过 <code>environ</code> 获得，HTTP响应的输出都可以通过 <code>start_response()</code> 加上函数返回值作为Body。</p>
<p>复杂的Web应用程序，光靠一个WSGI函数来处理还是太底层了，我们需要在WSGI之上再抽象出 <strong>Web框架</strong> ，进一步简化Web开发。</p>
<hr />
<h2 id="web">Web框架</h2>
<p>Python 有很多 Web 框架，如 Django, Tornado, Flask 等。Flask 很轻量，适合快速入门。下面简单介绍 Flask。</p>
<p>我们用 Flask 写一个 <code>app.py</code>，处理3个URL，分别是：</p>
<ul>
<li>GET /：首页，返回Home；</li>
<li>GET /signin：登录页，显示登录表单；</li>
<li>POST /signin：处理登录表单，显示登录结果。</li>
</ul>
<p>注意，同一个URL <code>/signin</code> 分别有GET和POST两种请求，映射到两个处理函数中。</p>
<p>Flask通过Python的装饰器在内部自动地把URL和函数给关联起来。</p>
<div class="hlcode"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">request</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">home</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;&lt;h1&gt;Home&lt;/h1&gt;&#39;</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/signin&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">signin_form</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;&#39;&lt;form action=&quot;/signin&quot; method=&quot;post&quot;&gt;</span>
<span class="s1">              &lt;p&gt;&lt;input name=&quot;username&quot;&gt;&lt;/p&gt;</span>
<span class="s1">              &lt;p&gt;&lt;input name=&quot;password&quot; type=&quot;password&quot;&gt;&lt;/p&gt;</span>
<span class="s1">              &lt;p&gt;&lt;button type=&quot;submit&quot;&gt;Sign In&lt;/button&gt;&lt;/p&gt;</span>
<span class="s1">              &lt;/form&gt;&#39;&#39;&#39;</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/signin&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">signin</span><span class="p">():</span>
    <span class="c1"># 需要从request对象读取表单内容：</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;admin&#39;</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;password&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&lt;h3&gt;Hello, admin!&lt;/h3&gt;&#39;</span>
    <span class="k">return</span> <span class="s1">&#39;&lt;h3&gt;Bad username or password.&lt;/h3&gt;&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>


<p>常见的Python Web框架：</p>
<ul>
<li>Django：全能型Web框架；</li>
<li>web.py：一个小巧的Web框架；</li>
<li>Bottle：和Flask类似的Web框架；</li>
<li>Tornado：Facebook的开源异步Web框架。</li>
</ul>
<p>--</p>
<h2 id="_1">使用模板</h2>
<p>Web App不仅仅是处理逻辑，展示给用户的页面也非常重要。在函数中返回一个包含HTML的字符串，简单的页面还可以，但是，想想新浪首页的6000多行的HTML，你确信能在Python的字符串中正确地写出来么？</p>
<p>使用模板，我们 <strong>需要预先准备一个HTML文档，这个HTML文档不是普通的HTML，而是嵌入了一些变量和指令，然后，根据我们传入的数据，替换后，得到最终的HTML，发送给用户</strong> 。</p>
<p>这是一种 MVC 模式：MVC：Model-View-Controller，中文名“模型-视图-控制器”。</p>
<ul>
<li>Python处理URL的函数就是C：Controller，Controller负责业务逻辑，比如检查用户名是否存在，取出用户信息等等；</li>
<li>包含变量 <code>{{ name }}</code> 的模板就是V：View，View负责显示逻辑，通过简单地替换一些变量，View最终输出的就是用户看到的HTML。</li>
<li>Model是用来传给View的，这样View在替换变量的时候，就可以从Model中取出相应的数据。Model 用来表示数据。</li>
</ul>
<div class="hlcode"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">render_template</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># 使用 render_template 渲染模板</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">home</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;home.html&#39;</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/signin&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">signin_form</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;form.html&#39;</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/signin&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">signin</span><span class="p">():</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">username</span><span class="o">==</span><span class="s1">&#39;admin&#39;</span> <span class="ow">and</span> <span class="n">password</span><span class="o">==</span><span class="s1">&#39;password&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;signin-ok.html&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>
    <span class="c1"># 传入参数 message, username 到对应模板中</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;form.html&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Bad username or password&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>


<p>Flask默认支持的模板是 <code>jinja2</code>。</p>
<p><code>home.html</code> :</p>
<div class="hlcode"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;font-style:italic&quot;</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>


<p><code>form.html</code>：</p>
<div class="hlcode"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Please Sign In<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  {% if message %}
  <span class="p">&lt;</span><span class="nt">p</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;color:red&quot;</span><span class="p">&gt;</span>{{ message }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  {% endif %}
  <span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;/signin&quot;</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;post&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">legend</span><span class="p">&gt;</span>Please sign in:<span class="p">&lt;/</span><span class="nt">legend</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;username&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Username&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;{{ username }}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;password&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Password&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;password&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="p">&gt;</span>Sign In<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>


<p><code>signin-ok.html</code> :</p>
<div class="hlcode"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Welcome, {{ username }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Welcome, {{ username }}!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>


<p>Flask 文件组织结构：</p>
<div class="hlcode"><pre><span></span><span class="p">.</span>
<span class="o">|</span><span class="n">____app</span><span class="p">.</span><span class="n">py</span>
<span class="o">|</span><span class="n">____templates</span><span class="o">/</span>
        <span class="o">|</span><span class="n">____form</span><span class="p">.</span><span class="n">html</span>
        <span class="o">|</span><span class="n">____home</span><span class="p">.</span><span class="n">html</span>
        <span class="o">|</span><span class="n">____signin</span><span class="o">-</span><span class="n">ok</span><span class="p">.</span><span class="n">html</span>
</pre></div>


<p>在Jinja2模板中，我们用 <code>{{ name }}</code> 表示一个需要替换的变量。很多时候，还需要循环、条件判断等指令语句，在Jinja2中，用 <code>{% ... %}</code> 表示指令。</p>
<p>比如循环输出页码：</p>
<div class="hlcode"><pre><span></span>{<span class="o">%</span> <span class="k">for</span> <span class="nv">i</span> <span class="nv">in</span> <span class="nv">page_list</span> <span class="o">%</span>}
    <span class="o">&lt;</span><span class="nv">a</span> <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;</span><span class="s">/page/{{ i }}</span><span class="s2">&quot;</span><span class="o">&gt;</span>{{ <span class="nv">i</span> }}<span class="o">&lt;/</span><span class="nv">a</span><span class="o">&gt;</span>
{<span class="o">%</span> <span class="nv">endfor</span> <span class="o">%</span>}
</pre></div>


<p>常用其他模板：</p>
<ul>
<li>Mako：用&lt;% ... %&gt;和${xxx}的一个模板；</li>
<li>Cheetah：也是用&lt;% ... %&gt;和${xxx}的一个模板；</li>
<li>Django：Django是一站式框架，内置一个用{% ... %}和{{ xxx }}的模板。</li>
</ul>
  <div class="relation">
    <h2>Related</h2>
    <ul>
    
    <li><a href="/wiki/tools/anaconda_python_notes.html">Anaconda notes</a></li>
    
    <li><a href="/wiki/python/python_oop.html">Python 面向对象编程</a></li>
    
    <li><a href="/wiki/python/python_database.html">Python 数据库访问</a></li>
    
    <li><a href="/wiki/python/python_network_programming.html">Python 网络编程</a></li>
    
    <li><a href="/wiki/python/python_basics_notes.html">Python Basics Notes</a></li>
    
    <li><a href="/wiki/python/python_re.html">Python 正则表达式</a></li>
    
    <li><a href="/wiki/python/python_email.html">Python 收发电子邮件</a></li>
    
    <li><a href="/wiki/python/python_modules.html">Python 中的模块</a></li>
    
    <li><a href="/wiki/python/python_debugging_and_tests.html">Python 错误处理与测试</a></li>
    
    <li><a href="/wiki/python/python_fp_notes.html">Python 函数式编程</a></li>
    
    <li><a href="/wiki/python/python_process_thread_and_async_io.html">Python 进程、线程与异步IO</a></li>
    
    <li><a href="/wiki/python/python_IO.html">Python IO 编程</a></li>
    
    </ul>
  </div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2020 Yilin Gui.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2020-02-07 23:43:24</p>
      </span>
    </div>

    
    
  </body>
</html>