<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/tango.css">
    <link rel="shortcut icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>ImageMagick -- 超级强大的命令行图像处理工具 - Yilin's Wiki</title>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          <!--$表示行内元素，$$表示块状元素 -->
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
        },
        "HTML-CSS": { availableFonts: ["TeX"] }
      });
    </script>
    <script type="text/javascript" async
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>

    <!--Mermaid流程图-->
    <script src="https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/wiki/">Home</a>&nbsp;&#187;&nbsp;<a href="/wiki/#tools">tools</a>&nbsp;&#187;&nbsp;ImageMagick -- 超级强大的命令行图像处理工具
    <span class="updated">Page Updated&nbsp;
      2019-07-22 00:01
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">ImageMagick -- 超级强大的命令行图像处理工具</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#mac-imagemagick">Mac 下安装 ImageMagick</a></li>
<li><a href="#_1">常用命令</a><ul>
<li><a href="#_2">图像格式转换</a></li>
<li><a href="#_3">缩放</a></li>
<li><a href="#_4">旋转</a></li>
<li><a href="#_5">裁剪</a></li>
<li><a href="#_6">图片压缩</a></li>
</ul>
</li>
<li><a href="#magick">使用 Magick++ 库</a></li>
</ul>
</div>
<p>ImageMagick 真的太 NB 了，谁用谁知道。</p>
<p><a href="https://github.com/ImageMagick/ImageMagick">ImageMagick on Github</a></p>
<p><img alt="ImageMagick" src="https://camo.githubusercontent.com/acf344955c86740b774c626ab9e142af90397452/68747470733a2f2f696d6167656d616769636b2e6f72672f696d6167652f77697a6172642e706e67" /></p>
<hr />
<h3 id="mac-imagemagick">Mac 下安装 ImageMagick</h3>
<p>直接用 homebrew：</p>
<div class="hlcode"><pre><span></span><span class="n">brew</span> <span class="n">install</span> <span class="n">imagemagick</span>
</pre></div>


<hr />
<h3 id="_1">常用命令</h3>
<h4 id="_2">图像格式转换</h4>
<div class="hlcode"><pre><span></span><span class="k">convert</span> <span class="n">test</span><span class="p">.</span><span class="n">jpg</span> <span class="n">test</span><span class="p">.</span><span class="n">png</span>
</pre></div>


<h4 id="_3">缩放</h4>
<div class="hlcode"><pre><span></span><span class="k">convert</span> <span class="o">-</span><span class="n">resize</span> <span class="mi">50</span><span class="o">%</span> <span class="n">test</span><span class="p">.</span><span class="n">png</span> <span class="k">result</span><span class="p">.</span><span class="n">png</span>
</pre></div>


<h4 id="_4">旋转</h4>
<div class="hlcode"><pre><span></span><span class="k">convert</span> <span class="o">-</span><span class="n">rotate</span> <span class="o">-</span><span class="mi">90</span> <span class="n">test</span><span class="p">.</span><span class="n">png</span> <span class="k">result</span><span class="p">.</span><span class="n">png</span>
</pre></div>


<h4 id="_5">裁剪</h4>
<div class="hlcode"><pre><span></span><span class="k">convert</span> <span class="o">-</span><span class="n">crop</span> <span class="mi">50</span><span class="n">x50</span><span class="o">+</span><span class="mi">10</span><span class="o">+</span><span class="mi">10</span> <span class="n">test</span><span class="p">.</span><span class="n">png</span> <span class="k">result</span><span class="p">.</span><span class="n">png</span>
</pre></div>


<h4 id="_6">图片压缩</h4>
<div class="hlcode"><pre><span></span><span class="o">#</span> <span class="err">会覆盖原有图片</span>
<span class="n">mogrify</span> <span class="o">-</span><span class="n">quality</span> <span class="mi">20</span> <span class="n">test</span><span class="p">.</span><span class="n">jpg</span>
</pre></div>


<hr />
<h3 id="magick">使用 Magick++ 库</h3>
<p>Magick++ 是 ImageMagick 的 C++ API。</p>
<p>在我的 Mac (macOS High Sierra 10.13.6) 上，使用 homebrew 安装完 ImageMagick 就可以直接用 Magick++。</p>
<p>例子：</p>
<div class="hlcode"><pre><span></span><span class="c1">// main.cc</span>
<span class="cp">#include</span> <span class="cpf">&lt;Magick++.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//InitializeMagick(*argv);  // for Windows</span>
  <span class="n">Magick</span><span class="o">::</span><span class="n">Image</span> <span class="n">img</span><span class="p">(</span><span class="s">&quot;batman.jpg&quot;</span><span class="p">);</span>
  <span class="n">img</span><span class="p">.</span><span class="n">magick</span><span class="p">(</span><span class="s">&quot;PNG&quot;</span><span class="p">);</span>
  <span class="n">img</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;result.png&quot;</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>CMakeLists.txt :</p>
<div class="hlcode"><pre><span></span>project(magick++_demo)
find_package(ImageMagick COMPONENTS Magick++)

include_directories(<span class="cp">${</span><span class="n">ImageMagick_INCLUDE_DIRS</span><span class="cp">}</span>)
add_executable(demo main.cc)
target_link_libraries(demo <span class="cp">${</span><span class="n">ImageMagick_LIBRARIES</span><span class="cp">}</span>)
</pre></div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 Yilin Gui.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-11-21 02:03:04</p>
      </span>
    </div>

    
    
  </body>
</html>